<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
    <link rel="stylesheet" href="{{ "/css/site.css" | relative_url }}">
    <script src="{{ "/scripts/lunr.min.js" | relative_url }}"></script>
    <script src="{{ "/scripts/navigation.js" | relative_url }}"></script>
    <script>
      {%- capture site_categories -%}
        {%- for category in site.categories -%}
          '{{- category | first -}}'
          {%- unless forloop.last -%}
            ,
          {%- endunless -%}
        {%- endfor -%}
      {%- endcapture -%}

      {%- capture site_tags -%}
        {%- for tag in site.tags -%}
          '{{- tag | first -}}'
          {%- unless forloop.last -%}
            ,
          {%- endunless -%}
        {%- endfor -%}
      {%- endcapture %}
      var categories = [{{ site_categories | default: "None" }}];
      var tags = [{{ site_tags | default: "None" }}]
    </script>
    {% seo %}
  </head>
  <body>
    <header id="header">
      <nav id="page_nav">
        {%- for nav_target in site.navigation -%}
        {%- if page.url == nav_target.url %}
        <a class="nav_item" title="Home Page" href="#" onclick='goHome();return false'>{{ nav_target.text }}</a>
        {%- else %}
        <a class="nav_item" href="#" onclick='writeFullPost("{{ nav_target.url | relative_url }}");return false'>{{ nav_target.text }}</a>
        {%- endif -%}
        {%- endfor %}
        <!-- lunr.js search -->
        <input onkeydown="if(event.keyCode == 13){event.preventDefault(); return false;}" id="search" type="search" name="lunr_search" placeholder="lunr.js site search">

        <a href="#" id="close_full_post" onclick="closeFullPost();return false">Close Displayed Content</a>
        <a href="#" id="clear_search_results" onclick="clearSearchResults();return false">Clear Search Results</a>
      </nav>

      <h1 id="headline">{{ site.title }} -- {{ site.description }}</h1>
    </header>

    <a href="#" id="previous_page" title="Previous Posts" onclick="previousPage();return false"><nav class="page_turner">&#8249;</nav></a>
    <a href="#" id="next_page" title="Next Posts" onclick="nextPage();return false"><nav class="page_turner">&#8250;</nav></a>

    <div id="all_posts_container">
      {%- for post in site.posts %}
      <div id="{{ post.permalink | sluggify }}" class="single_post_container" data-title="{{ post.title }}" data-categories="{{post.categories | join: ',' | default: 'None'}}" data-tags="{{post.tags | join: ',' | default: 'None'}}">
        <a href="#" onclick='writeFullPost("{{ post.permalink | relative_url }}");return false'>
          <div class="bg_post_image" style="background-image: url({{ post.image | relative_url }});"></div>
          <div class="over_text">
            <span><b>Author:</b> {{post.author | default: 'None'}}</span><br>
            <span><b>Date:</b> {{post.date | date: "%B %d, %Y" | default: 'None'}}</span><br>
            <span><b>Categories:</b> {{post.categories | join: ', ' | default: 'None'}}</span><br>
            <span><b>Tags:</b> {{post.tags | join: ', ' | default: 'None'}}</span>
            <p>{{- post | strip_html | truncatewords: 40 | strip -}} <em> Click for More</em></p>
          </div>
          <h2>{{- post.title -}}</h2>
        </a>
      </div>
      {%- endfor %}
      <div id="page_number"></div>
    </div>

    <div class="full_post" id="full_post"></div>

    <div id="footer_spacer"></div>
    <footer id="footer" class="contrast">
      <div id="copyright">Content Copyright {{ site.name }} in {{ site.time | date: '%Y' }}</div>
      <div id="advertisement"><a href="https://github.com/bryanmr/jekyll-theme-minimal-magazine">Jekyll Minimal Magazine</a> by <a href="https://bryanreese.net">Bryan Reese</a></div>
    </footer>
  </body>
</html>
